<!doctype html>
<html>
  <head>
    <title>Tri intelligent </title>
	<link href="{{ url_for('static', path='css/main.css') }}" rel="stylesheet">
	
	<script>
        async function submitForm(event) {
            event.preventDefault(); // Prevent the default form submission
            const form = event.target;
            const formData = new FormData(form);

            // Send the form data to the server
            const response = await fetch(form.action, {
                method: form.method,
                body: formData
            });

            if (response.ok) {
                const data = await response.json();
                // Update the div with the response message
                document.getElementById("responseMessage").innerHTML = `<p>${data.message}</p>`;
            } else {
                document.getElementById("responseMessage").innerHTML = `<p>Error occurred</p>`;
            }
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet" />
  </head>
  <body>
    <h1>Le Tri intelligent</h1>
    <form action="/record" method="post" onsubmit="submitForm(event)"> <!-- onsubmit intercept la soumission et la redirige vers submitForm -->
	  <label for="lname">nom:</label><br>
      <input type="text" name="texte" >
	  <label for="lname">nombre:</label><br>
      <input type="number" name="start_time" placeholder="Enter the number" step="0.1">
    </form>
    <img src="{{ url_for('static', path='images/poubelle.jpg') }}" class="poubelle" alt="Poubelle intelligente">
    
    <a href="/webcam" class="mon-bouton">
          Tri
      </a>
  </body>
</html>